{% extends './base.html' %}
{% block title %} All Room Available {% endblock %}
<body>
{% load static %}
{% block stylesheet %} 
	<link rel="stylesheet" href="{% static 'assets/fonts/font-awesome.min.css' %}">
	<link rel="stylesheet" href="{% static 'assets/css/styles.css' %}">
    
    <link rel="stylesheet" href="{% static 'assets/css/Projects-Clean-1.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/Projects-Clean.css' %}">


{% endblock %}

{% load static %}
{% block body %}
    <br>
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Filter
            <span class="caret"></span></button>
            <ul class="dropdown-menu">
            <form method="POST">
                {% csrf_token %}
                {{form1}}
                {{form2}}
                 <button type="go">Apply Filter</button>
             </form>
            </ul>
            
        </div>
       
   
    <p class="text-center text-secondary" style="padding-bottom:10px;"> {{groceries.count }} product{%if groceries.count > 1 %}s{% endif %} found </p>
    <div class="projects-clean">
        <div class="container align-items-center align-content-center align-self-center">
            <div class="row justify-content-center projects" 
            style="margin-left:0px;padding-bottom:0px;margin-right:0px;">
                {% for grocery in groceries %}
                    <div class="card" style="width: 18rem; margin: 5%;">
                        {% load static %}<img class="img-fluid" 
                        style="height:auto;width:auto;"
                        src="{% static 'assets/img/loft.jpg' %}"  >
                        <div class="card-body">
                            <h5 class="description" style="text-align: center; color:rgb(38,39,39);font-size:24px;"><strong>{{ grocery.product }}</strong></h5>
                            <p class="description just" style="text-align: center;"><i class="fa fa-map-marker"></i>&nbsp; &nbsp;{{grocery.company}}</p>
                          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                          <p class="description" style="color:rgb(38,39,39);font-size:24px; text-align: center;"><strong>â‚¹{{ grocery.price }}</strong></p>
                          <center><button  class="btn btn-primary btn-lg border rounded product" type="button" data-p_id = "{{ grocery.id }}">Add to cart</button></center>
                        </div>
                      </div>
                {% endfor %}
            </div>
        </div>
    </div>

{% endblock %}
{% block script %}
    <script>
    function UpdateQueryString(key, value, url) {
        if (!url) url = window.location.href;
        var re = new RegExp("([?&])" + key + "=.*?(&|#|$)(.*)", "gi"),
            hash;

        if (re.test(url)) {
            if (typeof value !== 'undefined' && value !== null) {
                return url.replace(re, '$1' + key + "=" + value + '$2$3');
            } 
            else {
                hash = url.split('#');
                url = hash[0].replace(re, '$1$3').replace(/(&|\?)$/, '');
                if (typeof hash[1] !== 'undefined' && hash[1] !== null) {
                    url += '#' + hash[1];
                }
                return url;
            }
        }
        else {
            if (typeof value !== 'undefined' && value !== null) {
                var separator = url.indexOf('?') !== -1 ? '&' : '?';
                hash = url.split('#');
                url = hash[0] + separator + key + '=' + value;
                if (typeof hash[1] !== 'undefined' && hash[1] !== null) {
                    url += '#' + hash[1];
                }
                return url;
            }
            else {
                return url;
            }
        }
    }
$(document).ready(function(){
    $(".product").on("click", function(evt) {
        var p_id = $(this).data("p_id");
     $.ajax({
      type: "POST",
      url: "{%url 'Cart_add'%}",
      data: {'product_id': p_id, 'csrfmiddlewaretoken':'{{ csrf_token }}'},
      success: function(result){
      },
      error: function(result){
      }
    });
   });
  });
</script>
{% endblock %}
</body>