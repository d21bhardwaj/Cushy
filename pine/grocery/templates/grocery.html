{% extends 'main/templates/base.html' %}
{% block title %} All Grocery Available {% endblock %}
<body>
{% load static %}
{% block stylesheet %} 
	<link rel="stylesheet" href="{% static 'assets/fonts/font-awesome.min.css' %}">
    
    <link rel="stylesheet" href="{% static 'assets/css/Projects-Clean-1.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/Projects-Clean.css' %}">
<!-- Some Problem in below CSS please check once-->
    {% comment %} <!link rel="stylesheet" href="{% static 'assets/css/AllRoom/styles.css' %}"> {% endcomment %}
<!-- The one above -->

{% endblock %}

{% load static %}
{% block body %}
    <br>
    <div class="table-responsive">
    <table class="table table-hover ">
        <thead>
            <tr>
            <th scope="col">#</th>
            <th scope="col">Product</th>
            <th scope="col">Quantity</th>
            <th scope="col">Price</th>
           
            </tr>
        </thead>
        <tbody>
            {% for grocery in groceries %}
                
                {% comment %} <div class="col-auto" data-toggle="modal" 
                data-target="#myModal">
                <a href="#" > {% endcomment %}
                
                <tr data-toggle="modal" data-id="{{forloop.counter}}" data-target="#{{forloop.counter}}">
                <th scope="row">{{ forloop.counter }}</th>
                <td>{{ grocery.product }}</td>
                <td>{{ grocery.quantity }}</td>
                <td>{{ grocery.price }}</td>
                </tr>
                
                {% include 'product_detail.html' %}
            {% endfor %}
            
        </tbody>
    </table>
{% endblock %}

{% block script %}
    <script>
    function UpdateQueryString(key, value, url) {
        if (!url) url = window.location.href;
        var re = new RegExp("([?&])" + key + "=.*?(&|#|$)(.*)", "gi"),
            hash;

        if (re.test(url)) {
            if (typeof value !== 'undefined' && value !== null) {
                return url.replace(re, '$1' + key + "=" + value + '$2$3');
            } 
            else {
                hash = url.split('#');
                url = hash[0].replace(re, '$1$3').replace(/(&|\?)$/, '');
                if (typeof hash[1] !== 'undefined' && hash[1] !== null) {
                    url += '#' + hash[1];
                }
                return url;
            }
        }
        else {
            if (typeof value !== 'undefined' && value !== null) {
                var separator = url.indexOf('?') !== -1 ? '&' : '?';
                hash = url.split('#');
                url = hash[0] + separator + key + '=' + value;
                if (typeof hash[1] !== 'undefined' && hash[1] !== null) {
                    url += '#' + hash[1];
                }
                return url;
            }
            else {
                return url;
            }
        }
    }
$(document).ready(function(){
    $(".product").on("click", function(evt) {
        var p_id = $(this).data("p_id");
     $.ajax({
      type: "POST",
      url: "{%url 'Cart_add'%}",
      data: {'product_id': p_id, 'csrfmiddlewaretoken':'{{ csrf_token }}'},
      success: function(result){
      },
      error: function(result){
      }
    });
   });
  });
</script>
{% endblock %}
</body>